const MarketingStatsCard = ({
  iconBg,
  iconColor,
  label,
  value,
  change,
  changeColor,
}) => {
  // Extract the color value from the Tailwind class (e.g., "text-[#2196F3]" -> "#2196F3")
  const getColorValue = (colorClass) => {
    const match = colorClass.match(/\[([^\]]+)\]/);
    return match ? match[1] : colorClass;
  };

  const color = getColorValue(iconColor);
  
  // Check if change value is negative
  const isNegative = change && change.toString().includes('-');
  const finalChangeColor = isNegative ? 'text-[#F44336]' : changeColor;

  return (
    <div className="bg-white px-2 py-4 rounded-sm flex items-end justify-between gap-2">
      <div className="flex items-center gap-2">
        <div className={`${iconBg} p-2 rounded-full`}>
          <svg
            width="39"
            height="36"
            viewBox="0 0 39 36"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
            className="w-8 h-8"
          >
            <path
              d="M17.9461 3C17.9461 2.70163 18.0721 2.41548 18.2965 2.2045C18.5209 1.99353 18.8252 1.875 19.1425 1.875C28.6131 1.875 36.2908 9.0945 36.2908 18C36.2908 26.9055 28.6131 34.125 19.1425 34.125C9.67181 34.125 1.99415 26.9055 1.99415 18C1.99148 15.8549 2.44526 13.731 3.32877 11.7534C4.21228 9.7757 5.50766 7.98425 7.13865 6.4845C7.25027 6.37862 7.38316 6.29465 7.52959 6.23749C7.67602 6.18032 7.83308 6.15109 7.99163 6.15151C8.15018 6.15192 8.30706 6.18196 8.45315 6.23988C8.59925 6.29781 8.73164 6.38246 8.84264 6.48892C8.95363 6.59538 9.04102 6.72153 9.09972 6.86002C9.15841 6.99852 9.18725 7.14661 9.18455 7.29567C9.18184 7.44474 9.14766 7.59182 9.08398 7.72835C9.0203 7.86489 8.92839 7.98816 8.8136 8.091C7.40985 9.38131 6.29499 10.9228 5.53474 12.6246C4.77449 14.3264 4.38422 16.1541 4.38694 18C4.38694 20.7442 5.25234 23.4268 6.8737 25.7085C8.49505 27.9903 10.7996 29.7687 13.4958 30.8188C16.192 31.869 19.1588 32.1438 22.0211 31.6084C24.8834 31.073 27.5126 29.7516 29.5762 27.8111C31.6398 25.8707 33.0451 23.3984 33.6145 20.7069C34.1838 18.0154 33.8916 15.2256 32.7748 12.6903C31.658 10.1549 29.7667 7.98796 27.3402 6.46336C24.9137 4.93875 22.0608 4.125 19.1425 4.125C18.8252 4.125 18.5209 4.00647 18.2965 3.7955C18.0721 3.58452 17.9461 3.29837 17.9461 3Z"
              fill={color}
            />
            <path
              d="M17.9456 7.5C17.9456 7.20163 18.0717 6.91548 18.2961 6.7045C18.5204 6.49353 18.8247 6.375 19.142 6.375C21.5872 6.375 23.9774 7.05679 26.0104 8.33417C28.0435 9.61154 29.628 11.4271 30.5637 13.5513C31.4994 15.6755 31.7442 18.0129 31.2672 20.2679C30.7902 22.523 29.6128 24.5943 27.8838 26.2201C26.1549 27.8459 23.952 28.9531 21.5539 29.4016C19.1558 29.8502 16.67 29.62 14.411 28.7401C12.152 27.8602 10.2212 26.3702 8.86279 24.4585C7.50436 22.5468 6.7793 20.2992 6.7793 18C6.7793 17.7016 6.90535 17.4155 7.12971 17.2045C7.35408 16.9935 7.65839 16.875 7.97569 16.875C8.29299 16.875 8.5973 16.9935 8.82167 17.2045C9.04604 17.4155 9.17209 17.7016 9.17209 18C9.17209 19.8542 9.75681 21.6668 10.8523 23.2085C11.9478 24.7502 13.5049 25.9518 15.3267 26.6614C17.1485 27.3709 19.1531 27.5566 21.0871 27.1949C23.0211 26.8331 24.7975 25.9402 26.1919 24.6291C27.5862 23.318 28.5357 21.6475 28.9204 19.829C29.3051 18.0104 29.1077 16.1254 28.3531 14.4123C27.5985 12.6993 26.3206 11.2351 24.681 10.205C23.0415 9.17483 21.1139 8.625 19.142 8.625C18.8247 8.625 18.5204 8.50647 18.2961 8.2955C18.0717 8.08452 17.9456 7.79837 17.9456 7.5Z"
              fill={color}
            />
            <path
              d="M19.1417 10.875C18.8244 10.875 18.5201 10.9935 18.2957 11.2045C18.0714 11.4155 17.9453 11.7016 17.9453 12C17.9453 12.2984 18.0714 12.5845 18.2957 12.7955C18.5201 13.0065 18.8244 13.125 19.1417 13.125C20.5167 13.125 21.8354 13.6386 22.8076 14.5529C23.7799 15.4671 24.3261 16.7071 24.3261 18C24.3261 19.2929 23.7799 20.5329 22.8076 21.4471C21.8354 22.3614 20.5167 22.875 19.1417 22.875C18.8244 22.875 18.5201 22.9935 18.2957 23.2045C18.0714 23.4155 17.9453 23.7016 17.9453 24C17.9453 24.2984 18.0714 24.5845 18.2957 24.7955C18.5201 25.0065 18.8244 25.125 19.1417 25.125C21.1513 25.125 23.0786 24.3743 24.4996 23.0381C25.9206 21.7019 26.7189 19.8897 26.7189 18C26.7189 16.1103 25.9206 14.2981 24.4996 12.9619C23.0786 11.6257 21.1513 10.875 19.1417 10.875Z"
              fill={color}
            />
          </svg>
        </div>
        <div className="flex flex-col">
          <p className={`text-xs font-semibold ${iconColor}`}>{label}</p>
          <span className="text-2xl font-bold text-gray-900">{value}</span>
        </div>
      </div>
      <span className={`text-xs font-semibold ${finalChangeColor}`}>{change}</span>
    </div>
  );
};

export default MarketingStatsCard;
